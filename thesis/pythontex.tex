%spell-checker: disable
%  PythonTeX Configuration

\usepackage{pythontex}
\usepackage{pgf}
\usepackage{import}
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
% PythonTeX Bug Fix % % % % % % % % % % % % % % % % % % % % % % % %
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % 
% pytexbug fix for context in customcode.
\makeatletter
\renewenvironment{pythontexcustomcode}[2][begin]{%
	\VerbatimEnvironment
	\Depythontex{env:pythontexcustomcode:om:n}%
	\ifstrequal{#1}{begin}{}{%
		\ifstrequal{#1}{end}{}{\PackageError{\pytx@packagename}%
			{Invalid optional argument for pythontexcustomcode}{}
		}%
	}%
	\xdef\pytx@type{CC:#2:#1}%
	\edef\pytx@cmd{code}%
	% PATCH \def\pytx@context{}%
	\pytx@SetContext
	% END PATCH
	\def\pytx@group{none}%
	\pytx@BeginCodeEnv[none]}%
{\end{VerbatimOut}%
\setcounter{FancyVerbLine}{\value{pytx@FancyVerbLineTemp}}%
\stepcounter{\pytx@counter}%
}%
\makeatother
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\setpythontexcontext{figurewidth=\the\textwidth}

%% Setup PythonTeX and TeXFigure
\begin{pythontexcustomcode}{py}
import os
from collections import OrderedDict
from fractions import Fraction

import texfigure
pytex.formatter = texfigure.repr_latex_formatter
texfigure.configure_latex_plots(pytex, font_size=12)

import numpy as np
from scipy.interpolate import interp1d, splev
import matplotlib
#matplotlib.use('pdf')
import matplotlib.pyplot as plt
import matplotlib.colors
import matplotlib.ticker
import seaborn
from sunpy.map import Map, GenericMap
import astropy.units as u
from astropy.coordinates import SkyCoord
from astropy.visualization import ImageNormalize,AsinhStretch,SqrtStretch
import fiasco
import synthesizAR
import synthesizAR.atomic
from synthesizAR.instruments import InstrumentSDOAIA
import roman

# Directory names for all chapters
manager_opts = {'python_dir': 'python', 'fig_dir': 'figures', 'data_dir': 'data',}

# Define color palette(s)
PALETTE = seaborn.color_palette('colorblind', 100)

# Set location of ebtel++ code
if 'EBTEL_DIR' not in os.environ:
	EBTEL_DIR = '/Users/willbarnes/Documents/work/codes/ebtelPlusPlus/'
else:
	EBTEL_DIR = os.environ['EBTEL_DIR']

# Set some plot styling here
plt.rcParams['pgf.preamble'] = [r'\usepackage{siunitx}']
plt.rcParams['pgf.preamble'] += [
	r'\DeclareSIUnit[number-unit-product={}]\erg{erg}',
	r'\DeclareSIUnit[number-unit-product={}]\dn{DN}',
	r'\DeclareSIUnit[number-unit-product={}]\pixel{pixel}',
	r'\DeclareSIUnit[number-unit-product={}]\photon{photon}',
]
plt.rcParams['text.usetex'] = True
plt.rcParams['font.family'] = 'serif'
plt.rcParams['font.serif'] = [] # Leave blank to inherit from document
plt.rcParams['font.sans-serif'] = [] # Leave blank to inherit from document
plt.rcParams['font.monospace'] = [] # Leave blank to inherit from document
#plt.rcParams['axes.titlesize'] = 12
#plt.rcParams['axes.labelsize'] = 12
plt.rcParams['legend.fontsize'] = 10
#plt.rcParams['xtick.labelsize'] = 10
#plt.rcParams['ytick.labelsize'] = 10
plt.rcParams['xtick.major.pad'] = 3
plt.rcParams['xtick.minor.pad'] = 3
plt.rcParams['ytick.major.pad'] = 3
plt.rcParams['ytick.minor.pad'] = 3
plt.rcParams['xtick.direction'] = 'in'
plt.rcParams['ytick.direction'] = 'in'
plt.rcParams['savefig.dpi'] = 200
plt.rcParams['savefig.format'] = 'pdf'
plt.rcParams['savefig.bbox'] = 'tight'

\end{pythontexcustomcode}
